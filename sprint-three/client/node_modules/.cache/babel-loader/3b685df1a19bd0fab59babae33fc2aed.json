{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ed\\\\desktop\\\\edward-chiu-brainflix\\\\sprint-two\\\\src\\\\components\\\\MainPage\\\\MainPage.jsx\";\nimport { Component } from \"react\";\nimport HeroVideo from \"../HeroVideo/HeroVideo\";\nimport VideoDescription from \"../VideoDescription/VideoDescription\";\nimport VideoList from \"../VideoList/VideoList\";\nimport DisplayComments from \"../DisplayComments/DisplayComments\";\nimport { API_URL, API_KEY } from \"../../utils/utils\";\nimport axios from \"axios\";\nimport \"../../App.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MainPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      videoList: [],\n      suggestedVideo: [],\n      currentVideo: [],\n      loading: true\n    };\n\n    this.getVideoById = videoId => {\n      axios.get(`${API_URL}/videos/${videoId}/?api_key=${API_KEY}`).then(res => {\n        this.setState({\n          currentVideo: res.data,\n          suggestedVideo: this.state.videoList.filter(video => video.id !== videoId),\n          loading: false\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleSubmitComments = event => {\n      const videoId = this.state.currentVideo.id;\n      axios.post(`${API_URL}/videos/${videoId}/comments?api_key=${API_KEY}`, {\n        name: \"User\",\n        comment: event.target.userComment.value\n      }).then(res => {\n        this.getVideoById(videoId);\n      }).catch(err => {\n        console.log(err);\n      });\n      event.preventDefault();\n    };\n\n    this.handleDeleteComments = event => {\n      const videoId = this.state.currentVideo.id;\n      const commentId = this.state.currentVideo.comments.id;\n      axios.post(`${API_URL}/videos/${videoId}/comments/${commentId}?api_key=${API_KEY}`).then(res => {\n        this.getVideoById(videoId);\n      }).catch(err => {\n        console.log(err);\n      });\n      event.preventDefault();\n      console.log(this.state.currentVideo.comments[0].id);\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`${API_URL}/videos/?api_key=${API_KEY}`).then(res => {\n      this.setState({\n        videoList: res.data\n      });\n\n      if (this.props.match.url === \"/\") {\n        this.getVideoById(this.state.videoList[0].id);\n      } else {\n        this.getVideoById(this.props.match.params.videoId);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      videoId\n    } = this.props.match.params;\n\n    if (this.props.match.url === \"/\" && videoId !== prevProps.match.params.videoId) {\n      this.getVideoById(this.state.videoList[0].id);\n    } else if (videoId !== prevProps.match.params.videoId) {\n      this.getVideoById(videoId);\n    }\n  }\n\n  render() {\n    if (this.state.loading === true) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(HeroVideo, {\n        currentVideo: this.state.currentVideo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App__divider-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App__main-content\",\n          children: [/*#__PURE__*/_jsxDEV(VideoDescription, {\n            data: this.state.currentVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(DisplayComments, {\n            data: this.state.currentVideo,\n            preventDefault: this.preventDefault,\n            handleSubmitComments: this.handleSubmitComments,\n            handleDeleteComments: this.handleDeleteComments\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App__sidebar\",\n          children: /*#__PURE__*/_jsxDEV(VideoList, {\n            data: this.state.suggestedVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MainPage;","map":{"version":3,"sources":["C:/Users/Ed/desktop/edward-chiu-brainflix/sprint-two/src/components/MainPage/MainPage.jsx"],"names":["Component","HeroVideo","VideoDescription","VideoList","DisplayComments","API_URL","API_KEY","axios","MainPage","state","videoList","suggestedVideo","currentVideo","loading","getVideoById","videoId","get","then","res","setState","data","filter","video","id","catch","err","console","log","handleSubmitComments","event","post","name","comment","target","userComment","value","preventDefault","handleDeleteComments","commentId","comments","componentDidMount","props","match","url","params","componentDidUpdate","prevProps","render"],"mappings":"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","sourcesContent":["import { Component } from \"react\"\r\nimport HeroVideo from \"../HeroVideo/HeroVideo\"\r\nimport VideoDescription from \"../VideoDescription/VideoDescription\"\r\nimport VideoList from \"../VideoList/VideoList\"\r\nimport DisplayComments from \"../DisplayComments/DisplayComments\"\r\nimport { API_URL, API_KEY } from \"../../utils/utils\"\r\nimport axios from \"axios\"\r\nimport \"../../App.scss\"\r\n\r\nclass MainPage extends Component {\r\n    state = {\r\n        videoList: [],\r\n        suggestedVideo: [],\r\n        currentVideo: [],\r\n        loading: true,\r\n    }\r\n\r\n    getVideoById = (videoId) => {\r\n        axios.get(`${API_URL}/videos/${videoId}/?api_key=${API_KEY}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    currentVideo: res.data,\r\n                    suggestedVideo: this.state.videoList.filter(video => video.id !== videoId),\r\n                    loading: false,\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    handleSubmitComments = (event) => {\r\n        const videoId = this.state.currentVideo.id\r\n        axios.post(`${API_URL}/videos/${videoId}/comments?api_key=${API_KEY}`, { name: \"User\", comment: event.target.userComment.value })\r\n            .then(res => {\r\n                this.getVideoById(videoId)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        event.preventDefault()\r\n    }\r\n\r\n    handleDeleteComments = (event) => {\r\n        const videoId = this.state.currentVideo.id\r\n        const commentId = this.state.currentVideo.comments.id\r\n        axios.post(`${API_URL}/videos/${videoId}/comments/${commentId}?api_key=${API_KEY}`)\r\n            .then(res => {\r\n                this.getVideoById(videoId)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        event.preventDefault()\r\n        console.log(this.state.currentVideo.comments[0].id)\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(`${API_URL}/videos/?api_key=${API_KEY}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    videoList: res.data\r\n                })\r\n                if (this.props.match.url === \"/\") {\r\n                    this.getVideoById(this.state.videoList[0].id)\r\n                } else {\r\n                    this.getVideoById(this.props.match.params.videoId)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { videoId } = this.props.match.params;\r\n        if (this.props.match.url === \"/\" && videoId !== prevProps.match.params.videoId) {\r\n            this.getVideoById(this.state.videoList[0].id)\r\n        } else if (videoId !== prevProps.match.params.videoId) {\r\n            this.getVideoById(videoId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.loading === true) {\r\n            return <div>Loading...</div>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <HeroVideo\r\n                    currentVideo={this.state.currentVideo}\r\n                />\r\n                <div className=\"App__divider-container\">\r\n                    <div className=\"App__main-content\">\r\n                        <VideoDescription\r\n                            data={this.state.currentVideo}\r\n                        />\r\n                        <DisplayComments\r\n                            data={this.state.currentVideo}\r\n                            preventDefault={this.preventDefault}\r\n                            handleSubmitComments={this.handleSubmitComments}\r\n                            handleDeleteComments={this.handleDeleteComments}\r\n                        />\r\n                    </div>\r\n                    <div className=\"App__sidebar\">\r\n                        <VideoList\r\n                            data={this.state.suggestedVideo}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MainPage\r\n\r\n"]},"metadata":{},"sourceType":"module"}